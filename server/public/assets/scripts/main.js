/*! blondegalow-calendar 2016-05-13 */
var app=angular.module("MainApp",["ngRoute","ngMaterial","ngAnimate","ngAria"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/main",{templateUrl:"views/message.html",controller:"MessageController"}).when("/calendar",{templateUrl:"views/calendar.html",controller:"CalendarController"}).when("/chores",{templateUrl:"views/chores.html",controller:"ChoresController"}).when("/groceries",{templateUrl:"views/admin.html",controller:"GroceryController"}),b.html5Mode(!0)}]),app.factory("UserService",["$http",function(a){var b={},c=function(){a.get("/auth").then(function(a){console.log(a),b.info=a.data,console.log("user is",b.info)})};return{user:b,getUserData:c}}]),app.controller("HeaderController",["UserService","$scope","$http","$location",function(a,b,c,d){function e(){b.selected={},$("body").removeClass()}a.getUserData(),b.user=a.user,b.selected={messages:"selected"},b.messages=function(){e(),b.selected.messages="selected",d.path("/main"),$("body").addClass("red")},b.calendar=function(){e(),b.selected.calendar="selected",d.path("/calendar"),$("body").addClass("blue")},b.chores=function(){e(),b.selected.chores="selected",d.path("/chores"),$("body").addClass("yellow")},b.groceries=function(){e(),b.selected.groceries="selected",d.path("/groceries"),$("body").addClass("purple")},b.admin=function(){e(),b.selected.admin="selected",d.path("/admin")}}]),app.controller("ModalController",["UserService","$scope","$http","$location",function(a,b,c,d){b.user=a.user,b.macs=[],b.submit=function(){b.name&&b.macAddress&&(b.macAddress.match(/^\w\w:\w\w:\w\w:\w\w:\w\w:\w\w$/i)?c.post("/mac",{name:b.name,mac:b.macAddress}).then(function(a){b.name="",b.macAddress="",b.getMacs()}):alert("Not a valid mac address ya doofus"))},b.getMacs=function(){c.get("/mac").then(function(a){b.macs=a.data})},b.remove=function(a){console.log(a),c["delete"]("/mac/"+a.id).then(function(a){b.getMacs()})},b.getMacs()}]),app.controller("WhoIsHomeController",["UserService","$scope","$http",function(a,b,c){b.user=a.user,b.house=[],b.getRouterData=function(){c.get("/mac/all").then(function(a){for(b.house=a.data;b.house.length<=8;)b.house.push("")})},b.getRouterData()}]),app.controller("MessageController",["UserService","$scope","$http","$route",function(a,b,c,d){b.user=a.user,b.posts=[],b.getPosts=function(){c.get("/message").then(function(a){b.posts=a.data.reverse()})},b.submit=function(){b.title&&b.newMessage&&c.post("/message",{title:b.title,text:b.newMessage}).then(function(a){console.log(a),b.newMessage="",b.title="",b.getPosts()})},b.remove=function(a){c["delete"]("/message/"+a.id).then(function(a){b.getPosts()})},b.getPosts()}]),app.controller("CalendarController",["UserService","$scope","$http","$route",function(a,b,c,d){}]),app.controller("ChoresController",["UserService","$scope","$http","$route",function(a,b,c,d){b.choreList=[],b.chore={},b.user=a.user,b.getChores=function(){c.get("/chore").then(function(a){b.choreList=a.data.reverse()})},b.postChore=function(){b.chore.assigned_to&&b.chore.task&&c.post("/chore",b.chore).then(function(a){b.chore={},b.getChores()})},b.complete=function(a){a.completed_by||c.put("/chore",{id:a.id,completed_by:b.user.info.display_name}).then(function(a){b.getChores()})},b.checkComplete=function(a){return a.completed_by?(a.completeText="âœ“","complete"):(a.completeText="Done!","incomplete")},b.getChores()}]),app.controller("GroceryController",["UserService","$scope","$http","$route",function(a,b,c,d){b.user=a.user}]);